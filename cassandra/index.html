<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <meta property="og:title" content="What I know about Apache Cassandra" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://dev.im-bot.com/cassandra//" />
<meta property="og:image" content="http://dev.im-bot.com/public/opengraph_logo.png" />
<meta property="og:description" content="IntroIntroduction to Apache CassandraCassandra has a peer-to-peer distributed architecture that is much more elegant, and easy to set up and maintain.In Cass..." />
<meta property="og:site_name" content="botbotbot" />
<meta property="og:locale" content="th_TH" />


  <title>
    
      What I know about Apache Cassandra &middot; botbotbot
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/searchbox.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Google Analytic-->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-52133577-1', 'auto');
    ga('send', 'pageview');

  </script>

</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>botbotbot's blog</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About Me</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/tags/">Tags</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">botbotbot</a>
            <small>'s blog</small>
            <!-- jekyll-lunr-js-search -->
<span id="search">
  <form action="/search" method="get" id="searchbox">
    <input type="text" id="search-query" placeholder="Search" autocomplete="off" name="q">
  </form>
</span>

          </h3>
        </div>
      </div>

      <!-- jekyll-lunr-js-search -->
<div class="container">
  <div class="post">
    <section id="search-results" style="display: none;">
        <div id="close-search-results">
          <h1 class="post-title">
              Search results
              <i class="fa fa-times" style="font-size: 0.7em"></i>
          </h1>
        </div>
        <div class="entries">
         </div>
    </section>
  </div>
</div>


      <div class="container content">
        <div class="post">
  <h1 class="post-title">What I know about Apache Cassandra</h1>
  <span class="post-date">
    24 Mar 2016
      
        &middot;
        <a href="/cassandra//index.html#disqus_thread" data-disqus-identifier="/cassandra/"></a>
        
          &middot;
          Updated March 24, 2016
        
      
  </span>

  <h1 id="intro">Intro</h1>

<ul>
<li><a href="http://www.datastax.com/wp-content/uploads/2012/08/WP-IntrotoCassandra.pdf">Introduction to Apache Cassandra</a></li>
</ul>

<blockquote>
<p>Cassandra has a peer-to-peer distributed architecture that is much more elegant, and easy to set up and maintain.
In Cassandra, all nodes are the same; there is no concept of a master node, with all nodes communicating with each other via a gossip protocol.</p>

<p>There is nothing programmatic that a developer or administrator needs to do or code to distribute data across a cluster.
Data is transparently partitioned across all nodes in either a randomized or ordered fashion, with random being the default.</p>

<p>When creating a new Cassandra database (also called a keyspace), a user simply indicates via a single command which data centers and/or cloud providers will hold copies of the new database; everything from that point forward is automatically handled and maintained by Cassandra.</p>

<p>If one or more nodes responsible for a particular set of data are down, data is simply written to another node, which temporarily holds the data. Once the node(s) come back online, they automatically bring themselves back up to date from nodes that are holding the data they maintain.</p>

<p>A user requests data from any node (which becomes that user’s coordinator node ), with the user’s query being assembled from one or more nodes holding the necessary data. If a particular node having the required data is down, Cassandra simply requests data from another node holding a replicated copy of that data.</p>

<p>While Cassandra is not a transactional database in the same way that legacy RDBMSs offer ACID transactions, it does offer the “AID” portion of ACID, in that data written is atomic, isolated, and durable. The “C” of ACID does not apply to Cassandra, as there is no concept of referential integrity or foreign keys</p>

<p>Because NoSQL databases like Cassandra do not support operations like SQL joins, data tends to be highly denormalized. While such a thing (wide rows) is normally a problem for an RDBMS, Cassandra provides exceptional performance for objects with many thousands of columns.</p>
</blockquote>

<!-- more -->

<ul>
<li><a href="http://exponential.io/blog/2015/01/22/cassandra-vs-mongodb/">Cassandra vs MongoDB</a></li>
<li><a href="http://db-engines.com/en/system/Cassandra%3BMongoDB">System Properties Comparison Cassandra vs. MongoDB</a></li>
<li><a href="http://www.edureka.co/blog/mongodb-vs-hbase-vs-cassandra/">Face Off: MongoDB Vs HBase Vs Cassandra</a></li>
<li><a href="https://www.linkedin.com/pulse/real-comparison-nosql-databases-hbase-cassandra-mongodb-sahu">A Real Comparison Of NoSQL Databases HBase, Cassandra &amp; MongoDB</a></li>
<li><a href="http://patrickmcfadin.com/2014/02/11/mongodb-this-is-not-the-database-you-are-looking-for/">MongoDB. This is not the database you are looking for.</a></li>
<li><a href="https://www.youtube.com/watch?v=5qEoEAfAer8">DataStax Cassandra Tutorials - Apache Cassandra Overview</a></li>
<li><a href="https://academy.datastax.com/demos/brief-introduction-apache-cassandra">A Brief Introduction to Apache Cassandra</a></li>
<li><a href="http://www.slideshare.net/patrickmcfadin/real-data-models-of-silicon-valley">Real data models of silicon valley</a></li>
<li><a href="http://www.divconq.com/2010/migrate-a-relational-database-structure-into-a-nosql-cassandra-structure-part-i/">Migrate a Relational Database Structure into a NoSQL Cassandra Structure (Part I)</a></li>
<li><a href="http://www.divconq.com/2010/migrate-a-relational-database-structure-into-a-nosql-cassandra-structure-part-ii-northwind-planning/">Migrate a Relational Database into Cassandra (Part II – Northwind Planning)</a></li>
</ul>

<blockquote>
<p>In a relational database setting I can often simply normalize away and worry about which table I need to focus my indexing efforts on later when I’m working in the application.  However, in NoSQL, non-relational database design, we often need to decide up front which entity most queries will be interested in and build everything else around that entity.</p>

<p>So…will it be “order” or “product”?  Today I’ll decide that the key entity in this database is “order” – customers will be hitting this on a daily, per transaction basis whereas I can probably run my product reports offline.</p>
</blockquote>

<ul>
<li><a href="http://www.planetcassandra.org/blog/soundcloud-activity-feed-and-real-time-stats-powered-by-apache-cassandra/">SoundCloud’s Activity Feed and Real-Time Stats Powered by Apache Cassandra</a></li>
<li><a href="http://www.planetcassandra.org/blog/interview/spotify-scales-to-the-top-of-the-charts-with-apache-cassandra-at-40k-requestssecond/">Spotify scales to the top of the charts with Apache Cassandra at 40k requests/second</a></li>
<li><a href="https://www.youtube.com/watch?v=NQXxKzfv7Zo">C* Summit EU 2013: Playlists at Spotify - Using Cassandra to Store Version Controlled Objects</a> - <a href="http://www.slideshare.net/planetcassandra/c-summit-eu-2013-playlists-at-spotify-using-cassandra-to-store-version-controlled-objects">Slide</a></li>
<li><a href="http://www.information-management.com/news/big-data-analytics/Relational-Database-Big-Data-Migration-Guide-10026758-1.html">Big Data Platforms: How To Migrate From Relational Databases to NoSQL</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLtNErhYMkHnF2LleKggnFhNcF4t37iDCZ">Apache Cassandra - O&#39;Reilly - Video Training</a></li>
<li><a href="http://www.slideshare.net/planetcassandra/migration-best-practices-from-rdbms-to-cassandra-without-a-hitch">Migration Best Practices: From RDBMS to Cassandra without a Hitch</a></li>
</ul>

<h1 id="data-model">Data Model</h1>

<ul>
<li><a href="http://www.planetcassandra.org/blog/cassandra-faq-can-i-start-with-a-single-node/">Cassandra FAQ: Can I Start With a Single Node?</a></li>
<li><a href="https://lostechies.com/ryansvihla/2015/09/17/data-density-destroyer-of-scalability/">Data Density! Destroyer of Scalability</a></li>
<li><a href="https://medium.com/@mustwin/cassandra-from-a-relational-world-7bbdb0a9f1d#.217xii10w">Cassandra From a Relational World</a></li>
</ul>

<blockquote>
<p>When you are designing the schema for your relational database, the primary thought on your mind is “What’s the best way to store this data?”. But with Cassandra, your dominant concern should be “How am I going to query this data?”</p>
</blockquote>

<ul>
<li><a href="https://wiki.apache.org/cassandra/DataModel">DataModel - Introduction</a></li>
<li><a href="http://www.tutorialspoint.com/cassandra/cassandra_data_model.htm">Cassandra - Data Model</a></li>
<li><a href="http://www.ipponusa.com/blog/modeling-data-with-cassandra-what-cql-hides-away-from-you/">Modeling data with Cassandra: what CQL hides away from you</a></li>
<li><a href="http://www.datastax.com/dev/blog/basic-rules-of-cassandra-data-modeling">Basic Rules of Cassandra Data Modeling</a></li>
</ul>

<blockquote>
<p>Developers coming from a relational background usually carry over rules about relational modeling and try to apply them to Cassandra. To avoid wasting time on rules that don’t really matter with Cassandra</p>

<p>Writes in Cassandra aren’t free, but they’re awfully cheap. Cassandra is optimized for high write throughput, and almost all writes are equally efficient [1]. If you can perform extra writes to improve the efficiency of your read queries, it’s almost always a good tradeoff.</p>

<p>Denormalization and duplication of data is a fact of life with Cassandra. Don’t be afraid of it. Disk space is generally the cheapest resource (compared to CPU, memory, disk IOPs, or network), and Cassandra is architected around that fact.</p>

<p>Cassandra doesn’t have JOINs, and you don’t really want to use those in a distributed fashion.</p>

<p>Rows are spread around the cluster based on a hash of the partition key, which is the first element of the PRIMARY KEY. So, the key to spreading data evenly is this: pick a good primary key.</p>

<p>Partitions are groups of rows that share the same partition key. When you issue a read query, you want to read rows from as few partitions as possible.</p>

<p>The way to minimize partition reads is to model your data to fit your queries. Don’t model around relations. Don’t model around objects.</p>

<p>If you need different types of answers, you usually need different tables. This is how you optimize for reads.  Remember, data duplication is okay. Many of your tables may repeat the same data.</p>
</blockquote>

<ul>
<li><a href="https://academy.datastax.com/courses/ds220-data-modeling">DS220: Data Modeling</a></li>
<li><a href="http://docs.datastax.com/en/cql/3.1/cql/ddl/dataModelingApproach.html">Data Modeling Concepts</a></li>
<li><a href="http://docs.datastax.com/en/cql/3.1/cql/ddl/ddl_intro_c.html">Data modeling example</a></li>
<li><a href="http://docs.datastax.com/en/cql/3.1/cql/cql_using/use_collections_c.html">Using collections - Set, List, Map Types</a></li>
<li><a href="https://www.instaclustr.com/blog/2015/08/03/common-cassandra-data-modelling-traps/">Common Cassandra Data Modelling Traps</a></li>
<li><a href="https://support.instaclustr.com/hc/en-us/articles/207071957">Data Modelling Recommended Practices</a></li>
<li><a href="http://www.seastar.io/blog/the-devops-of-cassandra-data-modeling/">The DevOps of Cassandra Data Modeling</a></li>
</ul>

<blockquote>
<p>In Cassandra, it is best to start the data modeling process by defining your query patterns first.</p>
</blockquote>

<ul>
<li><a href="https://www.hakkalabs.co/articles/cassandra-data-modeling-guide">An Advanced Cassandra Data Modeling Guide</a></li>
</ul>

<blockquote>
<p>Denormalize ALL THE THINGS: Increase the number of writes to reduce and simplify reads 
Most importantly we did this without querying multiple tables and merging and reconciling the results by using a data model that duplicates data and writes our host information in a de-normalized manner contrary to the original highly relational MySQL data model.</p>
</blockquote>

<ul>
<li><a href="http://www.slideshare.net/jaykumarpatel/cassandra-data-modeling-best-practices">Cassandra Data Modeling Best Practices by eBay ,  Slide</a></li>
<li><a href="http://www.ebaytechblog.com/2012/07/16/cassandra-data-modeling-best-practices-part-1/">Cassandra Data Modeling Best Practices by eBay, Part 1</a></li>
<li><a href="http://www.ebaytechblog.com/2012/08/14/cassandra-data-modeling-best-practices-part-2/">Cassandra Data Modeling Best Practices by eBay, Part 2</a></li>
<li><a href="http://www.slideshare.net/patrickmcfadin/advanced-data-modeling-with-apache-cassandra">Advanced data modeling with apache cassandra</a></li>
</ul>

<blockquote>
<p>Data Modeling Step:
1. Conceptual Data Model (ER Diagram?)
2. Application Query Workflow
3. Logical Data Model (Combine 1 &amp; 2)
4. Physical Data Model (3 with Data Type)</p>
</blockquote>

<ul>
<li><a href="http://www.slideshare.net/jericevans/cassandra-by-example-data-modelling-with-cql3">Cassandra By Example: Data Modelling with CQL3</a> - <a href="https://github.com/twissandra/twissandra/">Twissandra - Twitter + Cassandra</a></li>
<li><a href="http://www.slideshare.net/nkorla1share/cass-summit-3">Cassandra Data Modeling - Practical Considerations @ Netflix</a></li>
<li><a href="http://www.planetcassandra.org/blog/the-most-important-thing-to-know-in-cassandra-data-modeling-the-primary-key/">The most important thing to know in Cassandra data modeling: The primary key</a></li>
<li><a href="http://www.planetcassandra.org/blog/the-importance-of-single-partition-operations-in-cassandra/">The importance of single-partition operations in Cassandra</a></li>
<li><a href="http://www.planetcassandra.org/blog/transitioning-from-mysql-to-cassandra-at-chaordic-2/">Transitioning from MySQL to Cassandra at Chaordic</a></li>
<li><a href="https://blogs.infosupport.com/static-columns-in-cassandra-and-their-benefits/">Static columns in Cassandra and their benefits</a></li>
<li><a href="https://medium.com/@foundev/domain-modeling-around-deletes-1cc9b6da0d24#.6k2dnj3nj">Understanding Deletes</a></li>
<li><a href="https://www.gitbook.com/book/teddyma/learncassandra/details">Learn Cassandra - GitBook</a></li>
<li><a href="https://lostechies.com/ryansvihla/2014/04/17/100/">Data Modeling for Scale with Cassandra</a></li>
<li><a href="https://medium.com/@foundev/cassandra-batch-loading-without-the-batch-keyword-40f00e35e23e#.at85ikylw">Cassandra: Batch loading without the Batch keyword</a></li>
<li><a href="https://docs.datastax.com/en/playlist/doc/java/playlistPreface.html">Playlist tutorial</a></li>
<li><a href="http://www.allthingsdistributed.com/2008/12/eventually_consistent.html">Eventually Consistent - Revisited</a></li>
</ul>

<blockquote>
<p>the CAP theorem, which states that of three properties of shared-data systems—data consistency, system availability, and tolerance to network partition—only two can be achieved at any given time.</p>

<p>An important observation is that in larger distributed-scale systems, network partitions are a given; therefore, consistency and availability cannot be achieved at the same time. This means that there are two choices on what to drop: relaxing consistency will allow the system to remain highly available under the partitionable conditions, whereas making consistency a priority means that under certain conditions the system will not be available.</p>
</blockquote>

<ul>
<li><a href="https://lostechies.com/ryansvihla/2014/09/22/cassandra-query-patterns-not-using-the-in-query-for-multiple-partitions/">Cassandra Query Patterns: Not using the “in” query for multiple partitions.</a></li>
</ul>

<h1 id="driver">Driver</h1>

<ul>
<li><a href="https://github.com/datastax/nodejs-driver">nodejs-driver - DataStax Node.js Driver for Apache Cassandra</a></li>
<li><a href="https://academy.datastax.com/demos/getting-started-apache-cassandra-and-nodejs">Getting Started with Apache Cassandra and Node.js</a></li>
<li><a href="http://datastax.github.io/nodejs-driver/getting-started">nodejs-driver - Getting started</a></li>
</ul>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/git-bisect/">
            Git Bisect
            <small>14 Jun 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/mongo/">
            All I know about mongo
            <small>29 Mar 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/dotfile/">
            Dotfile
            <small>27 Mar 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


  
    <div class="related">
      <!-- disqus comment -->
      <div id="disqus_thread"></div>
      <script>
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'im-bot';
      var disqus_identifier = "/cassandra/";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  
  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'im-bot'; // required: replace example with your forum shortname
  // var disqus_developer = 1; // Comment out when the site is live

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
  </script>


  </body>

    <!-- jekyll-lunr-js-search -->
  <script src="/js/search.min.js" type="text/javascript" charset="utf-8"></script>
  
  <script id="search-results-template" type="text/mustache">
    {{#entries}}
      <article>
        <h3>
          {{#date}}<small><time datetime="{{pubdate}}" pubdate>{{displaydate}}</time></small>{{/date}}
          <a href="{{url}}">{{title}}</a>
        </h3>
      </article>
    {{/entries}}
  </script>
  
  <script type="text/javascript">
    $(function() {
      $('#search-query').lunrSearch({
        indexUrl: '/js/index.json',   // Url for the .json file containing search index data
        results : '#search-results',  // selector for containing search results element
        entries : '.entries',         // selector for search entries containing element (contained within results above)
        template: '#search-results-template'  // selector for Mustache.js template
      });
    });
    $("#close-search-results").click(function(){
      $('#search-query').val('');
      $('#search-results').hide();
    });
  </script>

</html>
