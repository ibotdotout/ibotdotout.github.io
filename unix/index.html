<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <meta property="og:title" content="Unix" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://dev.im-bot.com/unix//" />
<meta property="og:image" content="http://dev.im-bot.com/public/opengraph_logo.png" />
<meta property="og:image:width" content="862" />
<meta property="og:image:height" content="453" />
<meta property="og:description" content="Helpersh$ ~ $ home user directory$ ~+ # same as pwd$ ~- # previous directory$ ls -1 $PWD/*.txt # list all .txt with full path$ cd - # cd to previous path$ ex..." />
<meta property="og:site_name" content="botbotbot" />
<meta property="og:locale" content="th_TH" />


  <title>
    
      Unix &middot; botbotbot
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/searchbox.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Google Analytic-->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-52133577-1', 'auto');
    ga('send', 'pageview');

  </script>

</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>botbotbot's blog</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About Me</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/tags/">Tags</a>
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">botbotbot</a>
            <small>'s blog</small>
            <!-- jekyll-lunr-js-search -->
<span id="search">
  <form action="/search" method="get" id="searchbox">
    <input type="text" id="search-query" placeholder="Search" autocomplete="off" name="q">
  </form>
</span>

          </h3>
        </div>
      </div>

      <!-- jekyll-lunr-js-search -->
<div class="container">
  <div class="post">
    <section id="search-results" style="display: none;">
        <div id="close-search-results">
          <h1 class="post-title">
              Search results
              <i class="fa fa-times" style="font-size: 0.7em"></i>
          </h1>
        </div>
        <div class="entries">
         </div>
    </section>
  </div>
</div>


      <div class="container content">
        <div class="post">
  <h1 class="post-title">Unix</h1>
  <span class="post-date">
    27 Jun 2014
      
        Tags:
        
          <a href="/tags/#unix">
            unix
          </a>
        
      
      
        &middot;
        <a href="/unix//index.html#disqus_thread" data-disqus-identifier="/unix/"></a>
      
      
        &middot;
        Updated February 07, 2016
      
  </span>

  <h3 id="helper">Helper</h3>

<p><code>sh
$ ~ $ home user directory
$ ~+ # same as pwd
$ ~- # previous directory
$ ls -1 $PWD/*.txt # list all .txt with full path
$ cd - # cd to previous path
$ export EDITOR=vim # set vim as default editor
$ groups #list group
$ getent group &lt;group_name&gt; #list members of group
$ top #check performance
$ du -sh &lt;folder&gt; # summary disk usage of folder
$ df -h # disk free
$ chsh - &lt;user&gt; # change default ssh user
$ printenv # list environment variables
$ \&lt;cmd&gt; # run command by  avoid alias
</code></p>

<h3 id="command">Command</h3>

<p><code>sh
nl #number line
xargs &lt;cmd&gt; #change input to arguments, use with pipe
sed #stream editor
pbcopy &lt; &lt;file&gt; # OSX: copy file into clipboard
</code></p>

<h3 id="where-command">Where command</h3>

<p><code>sh
$ hash # list command and its path
$ type -a &lt;cmd&gt; # tell all path of commamd
$ which &lt;cmd&gt; # tell default path of command
</code></p>

<h3 id="redirectionhttpenwikipediaorgwikiredirectioncomputing"><a href="http://en.wikipedia.org/wiki/Redirection_computing">Redirection</a></h3>

<p><code>sh
$ cmd &gt; &lt;file&gt; # print output to file (overwrite)
$ cmd &gt;&gt; &lt;file&gt; # print output to file (append)
$ cmd 2&gt; &lt;file&gt; # print error to file
$ cmd &amp;&gt; &lt;file&gt; # print output &amp; error to file
$ cmd &lt; &lt;file&gt; # use file as  input
$ cmd &lt;&lt; &lt;file&gt; # use file as input
$ cmd &lt;&lt;&lt; &lt;any&gt;  #use anyas input (here string not compute any tag)
# Redirection output wiht sudo
$ echo "hello" | sudo tee out &gt; /dev/null # eq. echo "hello" &gt; out
# echo "hello" | sudo tee -a out &gt; /dev/null # eq echo "hello" &gt; out
</code></p>

<h3 id="jobshttpwwwthegeekstuffcom201005unix-background-job---fg-bg-tutorialhttpswwwyoutubecomwatchvr4xkcdrngiw"><a href="http://www.thegeekstuff.com/2010/05/unix-background-job/">Jobs</a> - <a href="https://www.youtube.com/watch?v=r4xkCDRnGiw">fg bg Tutorial</a></h3>

<p><code>sh
$ jobs # list suspended jobs
$ fg # put the top suspended job in the foreground
$ fg %1 # put the suspended job id 1 in the foreground
Ctrl-z # Suspend a foreground job
$ bg # run suspended job in background
$ kill # kill job
</code></p>

<h3 id="crontab-time-schedule">Crontab Time schedule</h3>

<p><code>sh
$ crontab -e #edit crontab profile
# */5 * * * * cmd
# run cmd every five minutes
$ grep CRON /var/log/syslog #see crontablog (debian)
</code></p>

<h3 id="zsh-history-expansion">Zsh History expansion</h3>
<p>should also work with bash.</p>

<p><code>sh
$ man zshexpn # manual for look in-depth
$ history # tell history command that keep in ~/.bash_history
$ history -c # clear history
! # previous that can combine with command and argument
$ !! # call previous command
$ !&lt;str&gt; # call last command that start with str
$ !?&lt;str&gt;[?] # call last command containing str
$ !&lt;hist_number&gt; # call command in nth of history files
 ^ # first argument
 $ # last argument
 :n # nth argument
 :m-n # mth to nth argument
 * # all argument
$ &lt;space&gt;&lt;cmd&gt; # call command without keep history
</code></p>

<h3 id="zsh-basic-editing---bash-shortcutshttpwwwskorkscom200909bash-shortcuts-for-maximum-productivity">Zsh Basic Editing - <a href="http://www.skorks.com/2009/09/bash-shortcuts-for-maximum-productivity/">Bash Shortcuts</a></h3>
<p>should also work with bash.</p>

<p>```sh
$ bindkey -v # vi mode
$ bindkey -e # emac mode
Ctrl + a # moves the cursor to begin of line
Ctrl + e # moves the cursor to end of line
Ctrl + u # delete current to begin of line
Ctrl + k # delete until end of line
Ctrl + l # clear
Ctrl + w # delete word backwords
Ctrl + d # delete char (moves forward)
Ctrl + f # move char foreward
Ctrl + b # move char backward
Meta + f # move word foreward
Meata + b # move word backward
Ctrl + y # yank last delete word
Ctrl + t # transpoes two characters
Esc + t # transpoes two words</p>

<p>Meta is your Alt key, normally.
For Mac OSX user need to enable it,  Open Terminal &gt; Preferences &gt; Settings &gt; Keyboard, and enable Use option as meta key.
```</p>

<h3 id="diff-commandhttplinuxaboutcomlibrarycmdblcmdl1diffhtm"><a href="http://linux.about.com/library/cmd/blcmdl1_diff.htm">Diff Command</a></h3>

<p><code>sh
$ diff --brief &lt;file1&gt; &lt;file2&gt;
</code></p>

<h3 id="howto-find-out-my-linux-distribution-name-and-versionhttpwwwcybercitibizfaqfind-linux-distribution-name-version-number"><a href="http://www.cyberciti.biz/faq/find-linux-distribution-name-version-number/">HowTo: Find Out My Linux Distribution Name and Version</a></h3>

<p><code>sh
$ cat /etc/*-release
</code></p>

<h3 id="timezone-setting-in-linuxhttpwwwthegeekstuffcom201009change-timezone-in-linux"><a href="http://www.thegeekstuff.com/2010/09/change-timezone-in-linux/">Timezone setting in Linux</a></h3>

<p><code>sh
$ export TZ=Asia/Bangkok date
</code></p>

<h3 id="how-to-cycle-through-reverse-i-search-in-bashhttpunixstackexchangecomquestions73498how-to-cycle-through-reverse-i-search-in-bash"><a href="http://unix.stackexchange.com/questions/73498/how-to-cycle-through-reverse-i-search-in-bash">How to cycle through reverse-i-search in BASH?</a></h3>

<p><code>sh
$ Ctrl+R grep Ctrl+R Ctrl+R
</code></p>

<h3 id="safeguard-rmhttpsgithubcomsindresorhusguidesblobmasterhow-not-to-rm-yourselfmdsafeguard-rm"><a href="https://github.com/sindresorhus/guides/blob/master/how-not-to-rm-yourself.md#safeguard-rm">safeguard-rm</a></h3>

<p>```sh
# only zsh</p>

<p>$ setopt noclobber # prevents overwriting an existing file.
$ setopt clobber # disable</p>

<p>$ unsetopt RM_STAR_SILENT # ask before rm with star (*)
$ setopt RM_STAR_WAIT # wait 10 sec before exec rm with star
```</p>

<h3 id="mac-style-copypaste-for-linux-machineshttpswwwyoutubecomwatchvfkp0flp3uw0"><a href="https://www.youtube.com/watch?v=fKP0FLp3uW0">Mac style copy/paste for linux machines</a></h3>

<p><code>sh
# copy/paste for linux machines (Mac style)
# sudo apt-get install xclip
$ alias pbcopy='xclip -selection clipboard'
$ alias pbpaste='xclip -selection clipboard -o'
$ alias pbselect='xclip -selection primary -o'
</code></p>

<h3 id="bash">Bash</h3>

<h3 id="shellbash-script">Shell/Bash Script</h3>

<p>```sh
#!/bin/bash</p>

<p>VAR = “hello”
if [ “$VAR” = “hello” ]; then  # use = to equal string not ==
  echo $VAR
else
  echo “fasle”
fi
```</p>

<h3 id="run-script---different-ways-to-execute-a-shell-scripthttpunixstackexchangecomquestions2976different-ways-to-execute-a-shell-script">Run Script - <a href="http://unix.stackexchange.com/questions/2976/different-ways-to-execute-a-shell-script">Different ways to execute a shell script</a></h3>

<p><code>sh
$ ./script      #run with using shebang(#) in script ex. #!/usr/bin/python
$ . script      #run with shell (work in related bash)
$ source script #run with shell (work in both bash and csh)
</code></p>

<h3 id="shell-function---passing-argument-to-alias-in-bashhttpstackoverflowcomquestions4060880passing-argument-to-alias-in-bash">Shell function - <a href="http://stackoverflow.com/questions/4060880/passing-argument-to-alias-in-bash">Passing argument to alias in bash</a></h3>

<p><code>sh
$ echo 'rm() { mkdir -p /tmp/rm; /bin/mv "$@" /tmp/rm; }' &gt;&gt; .zshrc
</code></p>

<h3 id="execute-combine-multiple-linux-commands-in-one-linehttpstackoverflowcomquestions13077241execute-combine-multiple-linux-commands-in-one-line"><a href="http://stackoverflow.com/questions/13077241/execute-combine-multiple-linux-commands-in-one-line">Execute combine multiple linux commands in one line</a></h3>

<p><code>sh
cmd1 &amp;&amp; cmd2  # cmd 2 run only if cmd1 successful
cmd1 ; cmd2  # cmd 2 run whether failed or not
</code></p>

<h3 id="parallel-shell-script">Parallel shell script</h3>
<ol>
  <li><a href="http://prll.sourceforge.net/shell_parallel.html">Parallel batch processing in the shell</a></li>
  <li><a href="http://stackoverflow.com/questions/19543139/bash-script-processing-commands-in-parallel">Bash script processing commands in parallel</a></li>
</ol>

<p><code>sh
process1 &amp;
process2 &amp;
process3 &amp;
process4 &amp;
wait  # wait until process1, 2, 3, 4 done
process5 &amp;
process6 &amp;
process7 &amp;
process8 &amp;
wait  # wait until process5, 6, 7, 8 done
</code></p>

<ol>
  <li><a href="http://stackoverflow.com/questions/38160/parallelize-bash-script">Parallelize Bash Script</a></li>
</ol>

<p>```sh
#!/bin/bash</p>

<p>nproc=$(($(nproc)-1))  # number of core cpu - 1</p>

<h1 id="waitproc---wait-until-have-core-slots">waitproc - wait until have core slots</h1>
<p>waitproc () {
  jobcnt=($(jobs -p))
  until [ ${#jobcnt[@]} -lt $nproc ]; do
    sleep 0.05
    jobcnt=($(job -p))
  done
```</p>

<h4 id="bash-for-loop-array-iterate-through-array-valueshttpwwwcybercitibizfaqbash-for-loop-array"><a href="http://www.cyberciti.biz/faq/bash-for-loop-array/">Bash For Loop Array: Iterate Through Array Values</a></h4>
<ul>
  <li><a href="http://www.tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html">Introduction to if</a></li>
</ul>

<p><code>sh
if [ $? -eq 0 ]
do
    echo "hello"
done
</code></p>

<ul>
  <li><a href="http://www.unixcl.com/2009/09/linux-seq-command-format-option-example.html">Linux seq command format option example</a></li>
</ul>

<p>```sh
#!/bin/bash</p>

<p>array=( one two three )</p>

<p>for i in “${array[@]}”
do
    echo $i
done
```</p>

<h3 id="get-file-directory-path-from-filepathhttpstackoverflowcomquestions6121091get-file-directory-path-from-filepath6121114"><a href="http://stackoverflow.com/questions/6121091/get-file-directory-path-from-filepath#6121114">Get file directory path from filepath</a></h3>

<p><code>sh
$ dirname "/home/user/dir/file.py"
/home/user/dir
$ basename "/home/user/dir/file.py"
file.py
</code></p>

<h3 id="how-to-find-out-from-the-logs-what-caused-system-shutdownhttpunixstackexchangecomquestions9819how-to-find-out-from-the-logs-what-caused-system-shutdown"><a href="http://unix.stackexchange.com/questions/9819/how-to-find-out-from-the-logs-what-caused-system-shutdown">How to find out from the logs what caused system shutdown?</a></h3>
<ul>
  <li><a href="http://unix.stackexchange.com/questions/107501/shutdown-log-linux-username">Shutdown log Linux UserName</a></li>
  <li><a href="http://www.cyberciti.biz/tips/linux-last-reboot-time-and-date-find-out.html">Linux last Reboot Time and Date Find Out Command</a></li>
</ul>

<p><code>sh
last reboot | less
last -x|grep shutdown | head -1
</code></p>

<h3 id="zsh">Zsh</h3>
<ul>
  <li>
    <p><a href="http://blog.patshead.com/2011/04/improve-your-oh-my-zsh-startup-time-maybe.html">Improve Your oh-my-zsh Startup Time (Maybe)</a></p>

    <p><code>sh
# check start zsh time
/usr/bin/time zsh -i -c exit
</code></p>
  </li>
  <li>
    <p><a href="http://superuser.com/questions/236953/zsh-starts-incredibly-slowly">zsh starts incredibly slowly</a></p>
  </li>
</ul>

<h3 id="bash-references">Bash References:</h3>
<ol>
  <li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html">Functions</a></li>
  <li><a href="http://blog.sanctum.geek.nz/bash-shell-expansion/">Bash shell expansion</a></li>
  <li><a href="https://speakerdeck.com/nibalizer/bash-tricks">bash-tricks</a></li>
  <li><a href="http://stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script">check command exitsts</a></li>
  <li><a href="https://sanctum.geek.nz/arabesque/high-speed-bash/">High-speed Bash</a></li>
</ol>

<h3 id="etc">ETC</h3>

<ul>
  <li><a href="http://blog.libinpan.com/2009/07/less-is-better-than-tail/">Less is better, than tail</a></li>
</ul>

<p><code>sh
$ less +F log/production.log
</code></p>

<h2 id="reference">Reference</h2>
<ol>
  <li><a href="http://www.linuxcommand.org/lc3_learning_the_shell.php">learning the shell</a></li>
  <li><a href="http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/">HowTo: Add Jobs To cron Under Linux or UNIX?</a></li>
  <li><a href="http://www.linuxquestions.org/questions/linux-general-1/how-to-set-cron-job-to-run-every-5-mins-61667/">how to set cron job to run every 5 mins?</a></li>
  <li><a href="https://help.ubuntu.com/community/CronHowto">CronHowto</a></li>
  <li><a href="http://www.sitepoint.com/unix-server-performance/">Checking UNIX Server Performance</a></li>
  <li><a href="http://stackoverflow.com/questions/82256/how-do-i-use-sudo-to-redirect-output-to-a-location-i-dont-have-permission-to-wr">How do I use sudo to redirect output to a location I don’t have permission to write to?</a></li>
  <li><a href="http://www.cyberciti.biz/faq/unix-disk-usage-command-examples/">UNIX Disk Usage Command Examples</a></li>
  <li><a href="http://blog.sanctum.geek.nz/series/unix-as-ide/">Unix as IDE: Introduction</a></li>
  <li><a href="https://leanpub.com/lets_learn_cli_right_now/read">หัดใช้ Command-line Interface เถอะ</a></li>
  <li><a href="http://macfeteria.com/2015/04/18/pimp-my-command-line/">Pimp my command line</a></li>
  <li><a href="https://github.com/jlevy/the-art-of-command-line">The Art of Command Line</a></li>
  <li><a href="https://www.youtube.com/playlist?list=PLu8EoSxDXHP7tXPJp5ZmUpuT7sFvrswzf">Command Line Power User</a></li>
  <li><a href="http://linux.die.net/abs-guide/x15683.html">Here Strings</a></li>
  <li><a href="https://kb.iu.edu/d/admm">what is the find command, and how do I use it to search</a></li>
  <li><a href="https://www.youtube.com/watch?v=ND-W4e-pqMo">Totally Tooling Mini Tip: Command-line Keyboard Shortcuts</a></li>
  <li><a href="http://www.theunixschool.com/2012/07/10-examples-of-paste-command-usage-in.html">10 examples of paste command usage in Linux</a></li>
  <li><a href="https://www.youtube.com/watch?v=R5fca6IUxHA">Bang! Previous Command Hotkeys - Linux CLI BASH ZSH</a></li>
</ol>

</div>

<div class="related">
  <h2>Latest Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/redux/">
            Redux
            <small>10 Nov 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/react/">
            React
            <small>04 Nov 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/git-ignore-sub-dir/">
            Git ignore files in sub-directories
            <small>03 Nov 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


  
    <div class="related">
      <!-- disqus comment -->
      <div id="disqus_thread"></div>
      <script>
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'im-bot';
      var disqus_identifier = "/unix/";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  



      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  
  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'im-bot'; // required: replace example with your forum shortname
  // var disqus_developer = 1; // Comment out when the site is live

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
  </script>


  </body>

    <!-- jekyll-lunr-js-search -->
  <script src="/js/search.min.js" type="text/javascript" charset="utf-8"></script>
  
  <script id="search-results-template" type="text/mustache">
    {{#entries}}
      <article>
        <h3>
          {{#date}}<small><time datetime="{{pubdate}}" pubdate>{{displaydate}}</time></small>{{/date}}
          <a href="{{url}}">{{title}}</a>
        </h3>
      </article>
    {{/entries}}
  </script>
  
  <script type="text/javascript">
    $(function() {
      $('#search-query').lunrSearch({
        indexUrl: '/js/index.json',   // Url for the .json file containing search index data
        results : '#search-results',  // selector for containing search results element
        entries : '.entries',         // selector for search entries containing element (contained within results above)
        template: '#search-results-template'  // selector for Mustache.js template
      });
    });
    $("#close-search-results").click(function(){
      $('#search-query').val('');
      $('#search-results').hide();
    });
  </script>

</html>
